webpackJsonp([1],{0:function(e,t,a){e.exports=a(298)},48:function(e,t){"use strict";function a(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0});var n={},l=0,r=function(){return Object.keys(n).length},o=function(e){var t=[];return[].concat(a(e)).map(function(e){var a=new Blob([e],{type:String(e.type)}),r=window.URL.createObjectURL(a);n[String(l)]={blob:a,objectURL:r},t.push(l),l+=1}),t},i=function(e,t){var a=String(e);return window.URL.revokeObjectURL(n[a].objectURL),n[a]={blob:t,objectURL:window.URL.createObjectURL(t)},a},c=function(){Object.keys(n).map(function(e){window.URL.revokeObjectURL(n[e].objectURL)}),n={}},u=function(e){return n[String(e)].objectURL},d=function(e){return n[String(e)].blob},s=function(e){var t=String(e);return window.URL.revokeObjectURL(n[t].objectURL),delete n[t],t};t["default"]={removeAllBlob:c,getLength:r,updateFile:i,importFiles:o,getObjectURL:u,getBlobObject:d,removeBlob:s}},143:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ActionType=void 0;var l=a(38),r=(n(l),{SAVE_GLOBAL_SETTING:"SAVE_GLOBAL_SETTING",SAVE_NCX_SETTING:"SAVE_NCX_SETTING",UPDATE_UUID:"UPDATE_UUID"}),o=function(e){return{type:r.SAVE_GLOBAL_SETTING,data:e}},i=function(){return{type:r.UPDATE_UUID}};t.ActionType=r,t["default"]={updateUUID:i,saveGlobalSetting:o}},144:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ActionType=void 0;var l=a(38),r=(n(l),a(48)),o=n(r),i={IMPORT_PAGES:"IMPORT_PAGES",SAVE_VIEWPORT_SETTING:"SAVE_VIEWPORT_SETTING",SET_COVER_PAGE:"SET_COVER_PAGE",ROTATE:"ROTATE_PAGE",MOVE_TO_NEXT_PAGE:"MOVE_TO_NEXT_PAGE",MOVE_TO_PREVIOUS_PAGE:"MOVE_TO_PREVIOUS_PAGE",CHANGE_PAGE_INDEX:"CHANGE_PAGE_INDEX",REMOVE_PAGE:"REMOVE_PAGE",CUT_PAGE:"CUT_PAGE"},c=function(e){return function(t){return{type:e,index:t}}},u=function(e){var t=o["default"].importFiles(e);return{type:i.IMPORT_PAGES,newFileIndexList:t}},d=function(e){return{type:i.SAVE_VIEWPORT_SETTING,data:e}},s=c(i.REMOVE_PAGE),f=c(i.SET_COVER_PAGE),m=c(i.ROTATE_PAGE),p=c(i.MOVE_TO_NEXT_PAGE),g=c(i.MOVE_TO_PREVIOUS_PAGE),h=function(e,t){return{type:i.CHANGE_PAGE_INDEX,originIndex:e,newIndex:t}},v=c(i.CUT_PAGE);t.ActionType=i,t["default"]={rotatePage:m,importPages:u,setCover:f,moveToNextPage:p,moveToPreviousPage:g,changePageIndex:h,cutPage:v,removePage:s,saveViewportSetting:d}},145:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var l=a(146),r=n(l),o=function(e,t){return function(){var a=arguments.length<=0||void 0===arguments[0]?e:arguments[0],n=arguments[1];return n.type in t?t[n.type]((0,r["default"])(a),n):a}};t["default"]=o},146:function(e,t,a){(function(e,t){"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},n=function(){function t(n,l,r,o,u){function f(n,r){if(null===n)return null;if(0===r)return n;var h,v;if("object"!=("undefined"==typeof n?"undefined":a(n)))return n;if(n instanceof c)h=new c;else if(n instanceof d)h=new d;else if(n instanceof s)h=new s(function(e,t){n.then(function(t){e(f(t,r-1))},function(e){t(f(e,r-1))})});else if(t.__isArray(n))h=[];else if(t.__isRegExp(n))h=new RegExp(n.source,i(n)),n.lastIndex&&(h.lastIndex=n.lastIndex);else if(t.__isDate(n))h=new Date(n.getTime());else{if(g&&e.isBuffer(n))return h=new e(n.length),n.copy(h),h;n instanceof Error?h=Object.create(n):"undefined"==typeof o?(v=Object.getPrototypeOf(n),h=Object.create(v)):(h=Object.create(o),v=o)}if(l){var E=m.indexOf(n);if(E!=-1)return p[E];m.push(n),p.push(h)}if(n instanceof c)for(var b=n.keys();;){var y=b.next();if(y.done)break;var x=f(y.value,r-1),w=f(n.get(y.value),r-1);h.set(x,w)}if(n instanceof d)for(var P=n.keys();;){var y=P.next();if(y.done)break;var _=f(y.value,r-1);h.add(_)}for(var O in n){var I;v&&(I=Object.getOwnPropertyDescriptor(v,O)),I&&null==I.set||(h[O]=f(n[O],r-1))}if(Object.getOwnPropertySymbols)for(var N=Object.getOwnPropertySymbols(n),O=0;O<N.length;O++){var T=N[O],j=Object.getOwnPropertyDescriptor(n,T);(!j||j.enumerable||u)&&(h[T]=f(n[T],r-1),j.enumerable||Object.defineProperty(h,T,{enumerable:!1}))}if(u)for(var k=Object.getOwnPropertyNames(n),O=0;O<k.length;O++){var S=k[O],j=Object.getOwnPropertyDescriptor(n,S);j&&j.enumerable||(h[S]=f(n[S],r-1),Object.defineProperty(h,S,{enumerable:!1}))}return h}"object"===("undefined"==typeof l?"undefined":a(l))&&(r=l.depth,o=l.prototype,u=l.includeNonEnumerable,l=l.circular);var m=[],p=[],g="undefined"!=typeof e;return"undefined"==typeof l&&(l=!0),"undefined"==typeof r&&(r=1/0),f(n,r)}function n(e){return Object.prototype.toString.call(e)}function l(e){return"object"===("undefined"==typeof e?"undefined":a(e))&&"[object Date]"===n(e)}function r(e){return"object"===("undefined"==typeof e?"undefined":a(e))&&"[object Array]"===n(e)}function o(e){return"object"===("undefined"==typeof e?"undefined":a(e))&&"[object RegExp]"===n(e)}function i(e){var t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),t}var c;try{c=Map}catch(u){c=function(){}}var d;try{d=Set}catch(u){d=function(){}}var s;try{s=Promise}catch(u){s=function(){}}return t.clonePrototype=function(e){if(null===e)return null;var t=function(){};return t.prototype=e,new t},t.__objToStr=n,t.__isDate=l,t.__isArray=r,t.__isRegExp=o,t.__getRegExpFlags=i,t}();"object"===a(t)&&t.exports&&(t.exports=n)}).call(t,a(15).Buffer,a(279)(e))},279:function(e,t){"use strict";e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},293:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var l=a(143),r=n(l),o=a(144),i=n(o);t["default"]={mangaInfo:r["default"],pageInfo:i["default"]}},294:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Icon=t.Button=t.Row=void 0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},r=a(21),o=n(r),i=function(e){var t=e.color,a=e.size,n=e["float"],r=Boolean(e.disabled),i=Boolean(e.active),c="btn",u={};return c+=t?" btn-"+t:"",c+=a?" btn-"+a:"",c+=n?" float-"+n:"",c+=i?" active":"",Object.keys(e).map(function(t){"color"!==t&&"size"!==t&&"float"!==t&&"active"!==t&&"disabled"!==t&&(u[t]=e[t])}),r===!0&&(u.disabled=!0),o["default"].createElement("button",l({className:c},u))},c=function(e){var t=e.fw,a=e.name,n="fa fa-"+a;return n=Boolean(t)?n+" fa-fw":n+"",o["default"].createElement("span",{className:n})},u=function(e){return o["default"].createElement("div",l({className:"row"},e))};t.Row=u,t.Button=i,t.Icon=c},295:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function l(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},u=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),d=a(21),s=n(d),f=a(54),m=a(33),p=a(293),g=n(p),h=a(48),v=n(h),E=a(294),b=a(297),y=n(b),x=function(e){function t(e){r(this,t);var a=o(this,Object.getPrototypeOf(t).call(this,e));return a.handleClickSetCover=a.handleClickSetCover.bind(a),a.handleClickRemovePage=a.handleClickRemovePage.bind(a),a.handleClickMoveToNextPage=a.handleClickMoveToNextPage.bind(a),a.handleClickMoveToPreviousPage=a.handleClickMoveToPreviousPage.bind(a),a.handleClickChangePangeIndex=a.handleClickChangePangeIndex.bind(a),a}return i(t,e),u(t,[{key:"render",value:function(){var e=this.props;return s["default"].createElement("div",{className:"card",style:{marginTop:20,background:"#f6f6f6"}},s["default"].createElement("img",{src:e.src,style:{alignSelf:"center"},className:"card-img-top",height:"210",width:"140"}),s["default"].createElement("div",{className:"card-block",style:{borderTop:"1px solid rgba(0,0,0,.125)",background:"#fff"}},s["default"].createElement("div",{className:"btn-toolbar"},s["default"].createElement("div",{className:"btn-group"},s["default"].createElement(E.Button,c({color:"secondary",size:"sm"},0===e.index?{disabled:"true"}:{onClick:this.handleClickSetCover}),s["default"].createElement(E.Icon,{name:"book"})),s["default"].createElement(E.Button,{color:"secondary",size:"sm",disabled:"true"},s["default"].createElement(E.Icon,{name:"repeat"})),s["default"].createElement(E.Button,{color:"secondary",size:"sm",disabled:"true"},s["default"].createElement(E.Icon,{name:"cut"})),s["default"].createElement(E.Button,{color:"secondary",size:"sm",onClick:this.handleClickRemovePage},s["default"].createElement(E.Icon,{name:"times"})))," ",s["default"].createElement("div",{className:"btn-group"},s["default"].createElement(E.Button,c({color:"secondary",size:"sm"},0===e.index?{disabled:"true"}:{onClick:this.handleClickMoveToPreviousPage}),s["default"].createElement(E.Icon,{name:"angle-left"})),s["default"].createElement(E.Button,{color:"secondary",size:"sm",onClick:this.handleClickMoveToNextPage},s["default"].createElement(E.Icon,{name:"angle-right"}))))),s["default"].createElement("div",{className:"card-footer text-center",onClick:this.handleClickChangePangeIndex},s["default"].createElement("div",{className:"card-text text-muted",style:{cursor:"default"}},0===e.index?"Cover":e.index+1)))}},{key:"handleClickSetCover",value:function(){var e=this.props,t=e.Action,a=e.index;t.setCover(a)}},{key:"handleClickRemovePage",value:function(){var e=this.props,t=e.Action,a=e.index;t.removePage(a)}},{key:"handleClickMoveToNextPage",value:function(){var e=this.props,t=e.Action,a=e.index;t.moveToNextPage(a)}},{key:"handleClickMoveToPreviousPage",value:function(){var e=this.props,t=e.Action,a=e.index;t.moveToPreviousPage(a)}},{key:"handleClickChangePangeIndex",value:function(){var e=this.props,t=e.Action,a=e.index,n=Number(prompt("New Index (number only) :"));!isNaN(n)&&n>0&&t.changePageIndex(a,n-1)}}]),t}(d.Component),w=function(e){function t(e){r(this,t);var a=o(this,Object.getPrototypeOf(t).call(this,e));return a.state={firstUpload:!0,generating:!1},a.handleClickUploadButton=a.handleClickUploadButton.bind(a),a.handleClickGenerateButton=a.handleClickGenerateButton.bind(a),a}return i(t,e),u(t,[{key:"render",value:function(){var e=this.props,t=this.state;return s["default"].createElement(E.Row,null,s["default"].createElement("div",{className:"col"},s["default"].createElement("div",{className:"card card-default"},s["default"].createElement("div",{className:"card-block"},s["default"].createElement("p",{className:"card-text",style:{cursor:"default"}},s["default"].createElement(E.Button,{color:"primary",onClick:this.handleClickUploadButton,title:"update images"},s["default"].createElement(E.Icon,{name:"upload",fw:"true"}))," ",s["default"].createElement(E.Button,c({color:"secondary"},t.firstUpload?{disabled:"true"}:{},{onClick:e.handleToggleGlobalInfoPanel,title:"edit book info"}),s["default"].createElement(E.Icon,{name:"edit",fw:"true"}))," ",s["default"].createElement(E.Button,{color:"secondary",disabled:"true"},s["default"].createElement(E.Icon,{name:"square-o",fw:"true"}))," ",s["default"].createElement(E.Button,{color:"secondary",disabled:"true",title:"edit contents"},s["default"].createElement(E.Icon,{name:"list-ul",fw:"true"}))," ",s["default"].createElement(E.Button,{color:"secondary",disabled:"true"},s["default"].createElement(E.Icon,{name:"cut",fw:"true",disabled:"true"}))," ",s["default"].createElement(E.Button,c({color:"secondary"},t.firstUpload?{disabled:"true"}:{},{onClick:e.handleToggleViewportPanel,title:"edit view setting"}),s["default"].createElement(E.Icon,{name:"eye",fw:"true"})),t.generating?s["default"].createElement(E.Button,{color:"secondary","float":"right",disabled:"true"},s["default"].createElement("span",{className:"fa fa-spinner fa-pulse"})):s["default"].createElement(E.Button,{color:"success","float":"right",onClick:this.handleClickGenerateButton},s["default"].createElement(E.Icon,{name:"download",fw:"true"})))))))}},{key:"handleClickUploadButton",value:function(){var e=document.createElement("input"),t="image/jpeg,image/png",a=this.props.Action,n=this;e.type="file",e.multiple="multiple",e.accept=t,e.onchange=function(e){var r=[].concat(l(this.files)).filter(function(e){return t.indexOf(e.type)>-1});r.length&&(a.importPages(r),n.state.firstUpload&&n.setState({firstUpload:!1}))},e.click()}},{key:"handleClickGenerateButton",value:function(){var e=this,t=this.props.Action;new Promise(function(t){return e.setState({generating:!0},t)}).then(function(){return(0,y["default"])(e.props.State)}).then(function(){t.updateUUID(),e.setState({generating:!1})})}}]),t}(d.Component),P=(function(e){function t(e){return r(this,t),o(this,Object.getPrototypeOf(t).call(this,e))}return i(t,e),u(t,[{key:"render",value:function(){return s["default"].createElement(E.Row,null,s["default"].createElement("div",{className:"col-8"},s["default"].createElement("div",{className:"card"},s["default"].createElement("div",{className:"card-header"},"NCX"),s["default"].createElement("ul",{className:"list-group list-group-flush"},s["default"].createElement("li",{className:"list-group-item"},s["default"].createElement("div",{className:"row",style:{flexGrow:1}},s["default"].createElement("div",{className:"col"},s["default"].createElement("input",{type:"text",className:"form-control input-sm",placeholder:"title"})),s["default"].createElement("div",{className:"col"},s["default"].createElement("input",{type:"number",min:"1",className:"form-control input-sm",placeholder:"page num"})),s["default"].createElement("div",{className:"col",style:{display:"flex",justifyContent:"flex-end"}},s["default"].createElement(E.Button,{color:"secondary"},s["default"].createElement(E.Icon,{name:"plus"}))," ",s["default"].createElement(E.Button,{color:"secondary"},s["default"].createElement(E.Icon,{name:"minus"})))))),s["default"].createElement("div",{className:"card-footer"},s["default"].createElement(E.Button,{color:"primary"},"Save")))))}}]),t}(d.Component),function(e){function t(e){r(this,t);var a=o(this,Object.getPrototypeOf(t).call(this,e));return a.handleClickSaveButton=a.handleClickSaveButton.bind(a),a}return i(t,e),u(t,[{key:"render",value:function(){var e=this.props;return s["default"].createElement(E.Row,null,s["default"].createElement("div",{className:"col"},s["default"].createElement("div",{className:"card"},s["default"].createElement("div",{className:"card-header"},"Book Info"),s["default"].createElement("div",{className:"card-block"},s["default"].createElement(E.Row,null,s["default"].createElement("div",{className:"col"},s["default"].createElement("div",{className:"form-group row"},s["default"].createElement("label",{className:"col-2 col-form-label"},"Title"),s["default"].createElement("div",{className:"col-10"},s["default"].createElement("input",{defaultValue:e.title,ref:"g_title",className:"form-control",type:"text"})))),s["default"].createElement("div",{className:"col"},s["default"].createElement("div",{className:"form-group row"},s["default"].createElement("label",{className:"col-2 col-form-label"},"Creator"),s["default"].createElement("div",{className:"col-10"},s["default"].createElement("input",{defaultValue:e.creator,ref:"g_creator",className:"form-control",type:"text"}))))),s["default"].createElement("p",null),s["default"].createElement(E.Row,null,s["default"].createElement("div",{className:"col"},s["default"].createElement("div",{className:"form-group row"},s["default"].createElement("label",{className:"col-2 col-form-label"},"Subject"),s["default"].createElement("div",{className:"col-10"},s["default"].createElement("input",{defaultValue:e.subject,ref:"g_subject",list:"datalist_subject",className:"form-control",type:"text"}),s["default"].createElement("datalist",{id:"datalist_subject"},s["default"].createElement("option",{value:"少年"}),s["default"].createElement("option",{value:"靑年"}),s["default"].createElement("option",{value:"成年コミック"}))))),s["default"].createElement("div",{className:"col"},s["default"].createElement("div",{className:"form-group row"},s["default"].createElement("label",{className:"col-2 col-form-label"},"Language"),s["default"].createElement("div",{className:"col-10"},s["default"].createElement("input",{defaultValue:e.language,ref:"g_language",list:"datalist_language",className:"form-control",type:"text"}),s["default"].createElement("datalist",{id:"datalist_language"},s["default"].createElement("option",{value:"ja"}),s["default"].createElement("option",{value:"zh-CN"}),s["default"].createElement("option",{value:"en-US"}))))))),s["default"].createElement("div",{className:"card-footer"},s["default"].createElement(E.Button,{color:"primary",onClick:this.handleClickSaveButton},"Save")))))}},{key:"handleClickSaveButton",value:function(){var e=this.refs.g_title.value,t=this.refs.g_creator.value,a=this.refs.g_subject.value,n=this.refs.g_language.value;this.props.handleSaveGlobalInfo({title:e,creator:t,subject:a,language:n})}}]),t}(d.Component)),_=function(e){function t(e){r(this,t);var a=o(this,Object.getPrototypeOf(t).call(this,e));return a.handleClickSaveButton=a.handleClickSaveButton.bind(a),a}return i(t,e),u(t,[{key:"render",value:function(){return s["default"].createElement(E.Row,null,s["default"].createElement("div",{className:"col"},s["default"].createElement("div",{className:"card"},s["default"].createElement("div",{className:"card-header"},"viewport"),s["default"].createElement("div",{className:"card-block"},s["default"].createElement(E.Row,null,s["default"].createElement("div",{className:"col"},s["default"].createElement("div",{className:"form-group row"},s["default"].createElement("label",{className:"col-2 col-form-label"},"Width (px)"),s["default"].createElement("div",{className:"col-10"},s["default"].createElement("input",{ref:"g_width",defaultValue:this.props.width,className:"form-control",type:"number"})))),s["default"].createElement("div",{className:"col"},s["default"].createElement("div",{className:"form-group row"},s["default"].createElement("label",{className:"col-2 col-form-label"},"Height (px)"),s["default"].createElement("div",{className:"col-10"},s["default"].createElement("input",{ref:"g_height",defaultValue:this.props.height,className:"form-control",type:"number"})))))),s["default"].createElement("div",{className:"card-footer"},s["default"].createElement(E.Button,{color:"primary",onClick:this.handleClickSaveButton},"Save")))))}},{key:"handleClickSaveButton",value:function(){var e=Number(this.refs.g_height.value),t=Number(this.refs.g_width.value);this.props.handleSaveViewportInfo({height:e,width:t})}}]),t}(d.Component),O=function(e){function t(e){r(this,t);var a=o(this,Object.getPrototypeOf(t).call(this,e));return a.state={showBookInfoPanel:!1,showViewportPanel:!1,showNCXPanel:!1},a.handleToggleGlobalInfoPanel=a.handleToggleGlobalInfoPanel.bind(a),a.handleSaveGlobalInfo=a.handleSaveGlobalInfo.bind(a),a.handleToggleViewportPanel=a.handleToggleViewportPanel.bind(a),a.handleSaveViewportInfo=a.handleSaveViewportInfo.bind(a),a}return i(t,e),u(t,[{key:"render",value:function(){var e=this.props,t=e.Action,a=e.State,n=Math.ceil(a.pageInfo.list.length/5),l=5-a.pageInfo.list.length%5,r=0,o=[],i=[],u=a.pageInfo.list.length-1;return l=5===l?0:l,a.pageInfo.list.map(function(e,a){if(i.push(s["default"].createElement(x,{key:n+"-"+r,src:v["default"].getObjectURL(e),index:a,Action:t})),a===u)for(r=4;l-- >0;)i.push(s["default"].createElement("div",{style:{marginTop:20},className:"card",key:"blank-"+l}));r<4?r++:(o.push(s["default"].createElement(E.Row,{key:"row-"+n},s["default"].createElement("div",{className:"col"},s["default"].createElement("div",{className:"card-group"},i)))),i=[],n--,r=0)}),s["default"].createElement("div",null,s["default"].createElement("nav",{className:"navbar navbar-light bg-faded"},s["default"].createElement("h3",{className:"navbar-brand",href:""},"Epub Manga Creator")),s["default"].createElement("p",null),s["default"].createElement("div",{className:"container"},s["default"].createElement(w,{Action:t,State:a,handleToggleGlobalInfoPanel:this.handleToggleGlobalInfoPanel,handleToggleViewportPanel:this.handleToggleViewportPanel}),s["default"].createElement("p",null),this.state.showViewportPanel?[s["default"].createElement(_,c({key:"EditViewportPanel",handleSaveViewportInfo:this.handleSaveViewportInfo},a.pageInfo.viewport)),s["default"].createElement("p",{key:"p"})]:void 0,this.state.showBookInfoPanel?[s["default"].createElement(P,c({key:"EditBookInfoPanel",handleSaveGlobalInfo:this.handleSaveGlobalInfo},a.mangaInfo.global)),s["default"].createElement("p",{key:"p"})]:void 0,s["default"].createElement(E.Row,null,s["default"].createElement("div",{className:"col"},s["default"].createElement("div",{className:"card card-default"},s["default"].createElement("div",{className:"card-header"},"Pages"),s["default"].createElement("div",{className:"card-block",style:{paddingTop:0}},o)))),s["default"].createElement("p",null),s["default"].createElement("p",{className:"text-muted"},s["default"].createElement("span",{className:"float-right"},"wing-kai's work")),s["default"].createElement("p",null," ")))}},{key:"handleToggleGlobalInfoPanel",value:function(){this.setState({showBookInfoPanel:!this.state.showBookInfoPanel,showViewportPanel:!1})}},{key:"handleToggleViewportPanel",value:function(){this.setState({showBookInfoPanel:!1,showViewportPanel:!this.state.showViewportPanel})}},{key:"handleSaveGlobalInfo",value:function(e){this.setState({showBookInfoPanel:!1}),this.props.Action.saveGlobalSetting(e)}},{key:"handleSaveViewportInfo",value:function(e){this.setState({showViewportPanel:!1}),this.props.Action.saveViewportSetting(e)}}]),t}(d.Component);t["default"]=(0,f.connect)(function(e){var t=e.mangaInfo,a=e.pageInfo;return{State:{mangaInfo:t,pageInfo:a}}},function(e){return{Action:(0,m.bindActionCreators)(c({},g["default"].pageInfo,g["default"].mangaInfo),e)}})(O)},296:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var l=a(33),r=a(134),o=n(r),i=a(299),c=n(i),u={},d=(0,l.compose)((0,l.applyMiddleware)(o["default"]),window.devToolsExtension?window.devToolsExtension({serialize:function(e,t){return"Symbol"==typeof t?String(t):t}}):function(e){return e})(l.createStore),s=d(c["default"],u);t["default"]=s},297:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var l=a(38),r=n(l),o=a(48),i=n(o),c=a(302),u=n(c),d=function(e){var t=new r["default"];t.folder("META-INF"),t.folder("OPS/css"),t.folder("OPS/images"),t.folder("OPS/xhtml");var a=u["default"]["toc.ncx"],n=e.mangaInfo.ncx.map(function(e,t){return'<ncx:navPoint id="p'+e.pageNum+'" playOrder="'+(t+1)+'"><ncx:navLabel><ncx:text>'+e.text+'</ncx:text></ncx:navLabel><ncx:content src="p'+e.pageNum+'.xhtml"/></ncx:navPoint>'}).join("");a=a.replace(new RegExp("{{uuid}}","gm"),e.mangaInfo.global.uuid).replace(new RegExp("{{title}}","gm"),e.mangaInfo.global.title).replace(new RegExp("{{creator}}","gm"),e.mangaInfo.global.creator).replace(new RegExp("<!-- nav map -->","gm"),n);var l=u["default"]["toc.xhtml"],o=e.mangaInfo.ncx.map(function(e,t){return'<li epub:type="chapter" id="toc-'+(t+1)+'"><a href="p'+e.pageNum+'.xhtml">'+e.text+"</a></li>"}).join(""),c='<li><a href="p1.xhtml">1</a></li>'+e.pageInfo.list.map(function(e,t){return'<li><a href="p'+(t+1)+'.xhtml">'+(t+2)+"</a></li>"}).join("");l=l.replace(new RegExp("{{title}}","gm"),e.mangaInfo.global.title).replace(new RegExp("{{ncxTitle}}","gm"),e.mangaInfo.ncxTitle).replace(new RegExp("<!-- toc -->","gm"),o).replace(new RegExp("<!-- page list -->","gm"),c);var d=u["default"]["package.opf"],s=e.pageInfo.list.map(function(e,t){var a=i["default"].getBlobObject(e),n=String(a.type),l='<item id="j'+(t+1)+'" href="images/'+(t+1)+"."+n.slice(6)+'" media-type="'+n+'"/>';return 0===t&&(l='<item id="cover" href="images/1.'+n.slice(6)+'" media-type="'+n+'"/>'+l),l}).join(""),f=e.pageInfo.list.map(function(e,t){return'<item id="p'+(t+1)+'" href="xhtml/p'+(t+1)+'.xhtml" media-type="application/xhtml+xml"/>'}).join(""),m="right",p=e.pageInfo.list.map(function(e,t){return m="left"===m?"right":"left",'<itemref idref="p'+(t+1)+'" properties="page-spread-'+m+'" />'}).join("");d=d.replace(new RegExp("{{uuid}}","gm"),e.mangaInfo.global.uuid).replace(new RegExp("{{title}}","gm"),e.mangaInfo.global.title).replace(new RegExp("{{language}}","gm"),e.mangaInfo.global.language).replace(new RegExp("{{creator}}","gm"),e.mangaInfo.global.creator).replace(new RegExp("{{subject}}","gm"),e.mangaInfo.global.subject).replace(new RegExp("{{createTime}}","gm"),(new Date).toISOString()).replace(new RegExp("<!-- image item -->","gm"),s).replace(new RegExp("<!-- page.xhtml item -->","gm"),f).replace(new RegExp("<!-- image item ref -->","gm"),p);var g={};return e.pageInfo.list.map(function(t,a){g["p"+(a+1)+".xhtml"]=u["default"]["page.xhtml"].replace("{{language}}",e.mangaInfo.global.language).replace("{{title}}",e.mangaInfo.global.title).replace("{{viewport}}","width="+e.pageInfo.viewport.width+",height="+e.pageInfo.viewport.height).replace("{{image file src}}","../images/"+(a+1)+"."+String(i["default"].getBlobObject(t).type).slice(6))}),t.file("mimetype",u["default"].mimetype),t.file("META-INF/container.xml",u["default"]["container.xml"]),t.file("OPS/css/default.css",u["default"]["default.css"]),t.file("OPS/css/en.css",u["default"]["en.css"]),t.file("OPS/css/ja-jp.css",u["default"]["ja-jp.css"]),t.file("OPS/xhtml/toc.ncx",a),t.file("OPS/xhtml/toc.xhtml",l),t.file("OPS/package.opf",d),e.pageInfo.list.map(function(e,a){var n=i["default"].getBlobObject(e);t.file("OPS/images/"+(a+1)+"."+String(n.type).slice(6),n)}),Object.keys(g).map(function(e){t.file("OPS/xhtml/"+e,g[e])}),new Promise(function(a){t.generateAsync({type:"blob",mimeType:"application/epub+zip"}).then(function(t){var n=document.createElement("a"),l=window.URL.createObjectURL(t);n.download=e.mangaInfo.global.title.trim()+".epub",n.href=l,n.click(),window.URL.revokeObjectURL(l),a()})})};t["default"]=d},298:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var l=a(21),r=n(l),o=a(98),i=n(o),c=a(54),u=a(296),d=n(u),s=a(295),f=n(s),m=document.getElementById("body"),p=r["default"].createElement(c.Provider,{store:d["default"]},r["default"].createElement(f["default"],null));i["default"].render(p,m)},299:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var l=a(33),r=a(301),o=n(r),i=a(300),c=n(i),u=(0,l.combineReducers)({pageInfo:o["default"],mangaInfo:c["default"]});t["default"]=u},300:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Object.defineProperty(t,"__esModule",{value:!0});var r,o=a(145),i=n(o),c=a(143),u=function(){for(var e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",t="",a=36;a-- >0;)t+=27===a||22===a||17===a||12===a?"-":String(e[Math.ceil(35*Math.random())]);return t},d={global:{uuid:u(),title:"",creator:"",subject:"",language:""},ncxTitle:"目次/Table of Contents",ncx:[{pageNum:1,text:"表紙"}]},s=(r={},l(r,c.ActionType.UPDATE_UUID,function(e){return e.global.uuid=u(),e}),l(r,c.ActionType.SAVE_GLOBAL_SETTING,function(e,t){var a=t.data;return e.global=a,e}),l(r,c.ActionType.SAVE_NCX_SETTING,function(e,t){var a=t.data;return e.ncx=a,e}),r);t["default"]=(0,i["default"])(d,s)},301:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0});var o,i=a(145),c=n(i),u=a(144),d=a(48),s=n(d),f={firstBlankPage:!0,viewport:{height:1500,width:1058},list:[]},m=(o={},l(o,u.ActionType.IMPORT_PAGES,function(e,t){var a=t.newFileIndexList;return e.list=[].concat(r(e.list),r(a)),e}),l(o,u.ActionType.SET_COVER_PAGE,function(e,t){var a=t.index,n=e.list.splice(a,1);return e.list.unshift(n),e}),l(o,u.ActionType.REMOVE_PAGE,function(e,t){var a=t.index,n=e.list.splice(a,1);return s["default"].removeBlob(n),e}),l(o,u.ActionType.MOVE_TO_NEXT_PAGE,function(e,t){var a=t.index,n=a+1===e.list.length?a:a+1,l=e.list[a],r=e.list[n];return e.list[a]=r,e.list[n]=l,e}),l(o,u.ActionType.MOVE_TO_PREVIOUS_PAGE,function(e,t){var a=t.index,n=a-1<0?0:a-1,l=e.list[a],r=e.list[n];return e.list[a]=r,e.list[n]=l,e}),l(o,u.ActionType.CHANGE_PAGE_INDEX,function(e,t){var a=t.originIndex,n=t.newIndex,l=e.list[a],r=e.list[n];return a<n&&(e.list.splice(n,1,r,l),e.list.splice(a,1)),a>n&&(e.list.splice(a,1),e.list.splice(n,1,l,r)),e}),l(o,u.ActionType.ROTATE_PAGE,function(e,t){t.index;return e}),l(o,u.ActionType.SAVE_VIEWPORT_SETTING,function(e,t){var a=t.data;return e.viewport=a,e}),o);t["default"]=(0,c["default"])(f,m)},302:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={"container.xml":'<?xml version="1.0" encoding="UTF-8"?><container xmlns="urn:oasis:names:tc:opendocument:xmlns:container" version="1.0"><rootfiles><rootfile full-path="OPS/package.opf" media-type="application/oebps-package+xml"/></rootfiles></container>',mimetype:"application/epub+zip","toc.xhtml":'<?xml version="1.0" encoding="UTF-8"?><html><head><title>{{title}}</title><link href="../css/default.css" rel="stylesheet" type="text/css" /></head><body epub:type="frontmatter"><header><h1>{{ncxTitle}}</h1></header><nav epub:type="toc" id="toc"><ol>  <!-- toc --></ol></nav><nav epub:type="page-list"><ol><!-- page list --></ol></nav></body></html>',"toc.ncx":'<?xml version="1.0" encoding="utf-8" standalone="no"?><ncx:ncx xmlns:ncx="http://www.daisy.org/z3986/2005/ncx/" version="2005-1"><ncx:head><ncx:meta name="dtb:uid" content="urn:uuid:{{uuid}}"/><ncx:meta name="dtb:depth" content="-1"/><ncx:meta name="dtb:totalPageCount" content="0"/><ncx:meta name="dtb:maxPageNumber" content="0"/></ncx:head><ncx:docTitle><ncx:text>{{title}}</ncx:text></ncx:docTitle><ncx:docAuthor><ncx:text>{{creator}}</ncx:text></ncx:docAuthor><ncx:navMap><!-- nav map --></ncx:navMap></ncx:ncx>',"page.xhtml":'<?xml version="1.0" encoding="utf-8"?><html xml:lang="{{language}}" xmlns="http://www.w3.org/1999/xhtml" xmlns:xml="http://www.w3.org/XML/1998/namespace" xmlns:epub="http://www.idpf.org/2007/ops"><head><title>{{title}}</title><meta name="viewport" content="{{viewport}}"/><style>html,body,img{width:100%;height:100%;margin:0;padding:0;}</style></head><body epub:type="bodymatter"><img src="{{image file src}}"/></body></html>',
"package.opf":'<?xml version="1.0" encoding="UTF-8"?><package xmlns="http://www.idpf.org/2007/opf" version="3.0" xml:lang="{{language}}" prefix="rendition: http://www.idpf.org/vocab/rendition/#" unique-identifier="ootuya-id"><metadata xmlns:opf="http://www.idpf.org/2007/opf" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:dcterms="http://purl.org/dc/terms/"><dc:identifier id="ootuya-id">urn:uuid:{{uuid}}</dc:identifier><dc:title>{{title}}</dc:title><dc:language>{{language}}</dc:language><dc:subject>{{subject}}</dc:subject><dc:creator>{{creator}}</dc:creator><meta property="dcterms:modified">{{createTime}}</meta><meta property="rendition:layout">pre-paginated</meta><meta property="rendition:orientation">portrait</meta><meta property="rendition:spread">landscape</meta></metadata><manifest><item id="default-style" href="css/default.css" media-type="text/css"/><item id="en-style" href="css/en.css" media-type="text/css"/><item id="ja-jp-style" href="css/ja-jp.css" media-type="text/css"/><!-- image item --><item id="toc" properties="nav" href="xhtml/toc.xhtml" media-type="application/xhtml+xml"/><!-- page.xhtml item --><item id="ncxtoc" href="xhtml/toc.ncx" media-type="application/x-dtbncx+xml"/></manifest><spine toc="ncxtoc" page-progression-direction="rtl"><!-- image item ref --></spine></package>',"default.css":'@charset "utf-8";ol{list-style-type:none}a{text-decoration:none}a:hover{text-decoration:underline}body{font-size:14pt;font-family:"KozMinPr6N-Medium","HiraMinProN-W3","ＭＳ 明朝",serif,sans-serif;margin:auto 1em;padding:1em 0;max-height:28em;background-color:#fff4e7}',"en.css":"h1.ja-jp,h2.ja-jp,h3.ja-jp,p.ja-jp,dt.ja-jp,dd.ja-jp{display:none}","ja-jp.css":"h1.en,h2.en,h3.en,p.en,dt.en,dd.en{display:none}"};t["default"]=a}});